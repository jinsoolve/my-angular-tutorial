ì¢‹ìŠµë‹ˆë‹¤!
ì´ì œ Set<SearchKeyword>ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ëœë¤ keywordë¥¼ ì„ íƒí•´ì„œ,
ê°ê°ì— ëŒ€í•´ SearchStrategy.getFilteredItems(query)ë¥¼ í˜¸ì¶œí•˜ê³  ì‹¶ë‹¤ëŠ” ê±°ì£ ?

â¸»

âœ… ëª©í‘œ
	â€¢	Set<SearchKeyword>ì—ì„œ Nê°œ ëœë¤ ì¶”ì¶œ
	â€¢	ê° keywordë¡œ getFilteredItems(keyword) ì‹¤í–‰
	â€¢	ê²°ê³¼ ë° ì‹œê°„ ì¸¡ì • (ì˜µì…˜)

â¸»

âœ… í•¨ìˆ˜ ì½”ë“œ: Nê°œ ëœë¤ ì¶”ì¶œ í›„ ì „ëµ í˜¸ì¶œ

function testMultipleRandomQueriesFromFetchedKeywords(
  fetchedKeywords: Set<{ id: string; keyword: string }>,
  strategy: { getFilteredItems: (query: string) => any },
  count: number
): void {
  const keywordsArray = Array.from(fetchedKeywords);

  if (keywordsArray.length < count) {
    console.warn(`â— ìš”ì²­í•œ ê°œìˆ˜(${count})ê°€ Set í¬ê¸°(${keywordsArray.length})ë³´ë‹¤ í½ë‹ˆë‹¤.`);
    count = keywordsArray.length;
  }

  // âœ… Fisher-Yates ì…”í”Œë¡œ ëœë¤í•œ Nê°œ ì¶”ì¶œ
  for (let i = keywordsArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [keywordsArray[i], keywordsArray[j]] = [keywordsArray[j], keywordsArray[i]];
  }
  const selected = keywordsArray.slice(0, count);

  // âœ… ê° keywordë¡œ ê²€ìƒ‰ ì‹¤í–‰
  for (const kw of selected) {
    const start = performance.now();
    const result = strategy.getFilteredItems(kw.keyword);
    const end = performance.now();

    console.log(`ğŸ” '${kw.keyword}' â†’ ${result.length}ê°œ ê²°ê³¼`);
    console.log(`â±ï¸ ${end - start}ms`);
  }
}


â¸»

âœ… ì‚¬ìš© ì˜ˆ

testMultipleRandomQueriesFromFetchedKeywords(fetchedKeywords, strategy, 5);

ìœ„ ì½”ë“œëŠ” Setì—ì„œ ëœë¤í•˜ê²Œ 5ê°œ keywordë¥¼ ë½‘ì•„ ìˆœì°¨ì ìœ¼ë¡œ ê²€ìƒ‰ì„ ì‹¤í–‰í•˜ê³ ,
ê° ê²°ê³¼ ìˆ˜ì™€ ê±¸ë¦° ì‹œê°„ë„ ì¶œë ¥í•©ë‹ˆë‹¤.

â¸»

âœ… í•„ìš”ì‹œ í‰ê·  ì‹œê°„ ê³„ì‚° í¬í•¨?

ì›í•˜ë©´ ì•„ë˜ì²˜ëŸ¼ í‰ê·  ì‹œê°„ë„ ë„£ì„ ìˆ˜ ìˆì–´ìš”:

let totalTime = 0;

for (const kw of selected) {
  const start = performance.now();
  const result = strategy.getFilteredItems(kw.keyword);
  const end = performance.now();
  totalTime += (end - start);
}
console.log(`ğŸ“Š í‰ê·  ì‹œê°„: ${(totalTime / count).toFixed(2)}ms`);


â¸»

í•„ìš”í•˜ë©´ suffixTrie, naive ë“±ì„ ë¹„êµí•˜ëŠ” ë²„ì „ë„ í†µí•©í•´ë“œë¦´ ìˆ˜ ìˆì–´ìš”.
ì§€ê¸ˆ ë‹¨ê³„ì—ì„œëŠ” ì´ ì½”ë“œë¡œ ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.