import * as fs from 'fs';

function generateDistinctKeywordData(
  itemCount: number,
  keywordsPerItem: number,
  keywordPool: string[]
): { id: string, keyword: string }[] {
  const result: { id: string, keyword: string }[] = [];
  const totalKeywordsNeeded = itemCount * keywordsPerItem;

  if (keywordPool.length < totalKeywordsNeeded) {
    throw new Error("keywordPool이 너무 작습니다.");
  }

  const shuffledPool = [...keywordPool].sort(() => Math.random() - 0.5);
  let keywordIndex = 0;

  for (let i = 0; i < itemCount; i++) {
    const id = `item-${i.toString().padStart(5, '0')}`;
    for (let j = 0; j < keywordsPerItem; j++) {
      result.push({
        id,
        keyword: shuffledPool[keywordIndex++]
      });
    }
  }

  return result;
}

// ✅ keyword pool 만들기
const keywordPool = Array.from({ length: 30000 }, (_, i) => `kw-${i}`);

// ✅ 더미 데이터 생성
const flatData = generateDistinctKeywordData(10000, 3, keywordPool);

// ✅ 파일로 저장 (JSON format)
fs.writeFileSync('dummy_data.json', JSON.stringify(flatData, null, 2), 'utf-8');

console.log('✅ dummy_data.json 파일 저장 완료');